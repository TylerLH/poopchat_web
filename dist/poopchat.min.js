!function(e){try{e=angular.module("poopchat-templates")}catch(t){e=angular.module("poopchat-templates",[])}e.run(["$templateCache",function(e){e.put("/poopchat/chat/chat.html",'<div class="messages-container" autoscroller=""><div class="message" ng-repeat="message in messages"><strong>{{message.user || \'anonymous\'}} &raquo;</strong> {{message.content}}</div></div><form ng-submit="sendMessage()" class="message-form"><input class="message-input" ng-model="message.content" placeholder="Talk to fellow poopers..." required autofocus><button type="submit" class="btn-send">Send</button></form>')}])}(),angular.module("poopchat",["ui.router","ngAnimate","duScroll","LocalStorageModule","poopchat-templates"]),function(){"use strict";function e(e,t,o,s){var n=o.get("username");n&&(e.username=n),t.setUsername=function(){var t=s.prompt("What would you like your username to be?");t&&(e.username=t,o.set("username",t))}}angular.module("poopchat").controller("AppController",["$rootScope","$scope","localStorageService","$window",e])}(),function(){"use strict";angular.module("poopchat").directive("autoscroller",[function(){return{restrict:"A",link:function(e,t){e.$watchCollection("messages",function(){t.scrollTo(0,t[0].scrollHeight)})}}}])}(),function(){"use strict";function e(e,t,o){e.messages=[],e.message={},o.stream.onmessage=function(t){var o=JSON.parse(t);e.messages.push(o),e.$digest()};var s=function(){e.message={}},n=function(){e.messages.push({content:"There was a problem sending your message. Try again..."})};e.sendMessage=function(){o.connected?(e.username&&(e.message.user=e.username),o.sendMessage(e.message,s,n)):e.messages.push({content:"You're not connected!"})}}angular.module("poopchat").controller("ChatController",["$scope","$log","socket",e])}(),function(){"use strict";angular.module("poopchat").service("PushStream",["$window",function(e){return e.PushStream}]),angular.module("poopchat").factory("socket",["$rootScope","PushStream",function(e,t){var o={connecting:!1,connected:!1};return o.stream=new t({host:"chat.poopchat.me",modes:"websocket|stream|longpolling"}),o.sendMessage=function(e,t,o){this.stream.sendMessage(JSON.stringify(e),t,o)},o.stream.onstatuschange=function(e){switch(e){case t.CONNECTING:o.connecting=!0;break;case t.OPEN:o.connected=!0;break;case t.CLOSED:o.connected=!1}},o.stream.addChannel("global"),o.stream.connect(),o}])}(),function(){"use strict";angular.module("poopchat").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){o.html5Mode(!0),t.otherwise("/"),e.state("chat",{url:"/",templateUrl:"/poopchat/chat/chat.html",controller:"ChatController"})}])}();